---
import LayoutCurso from '../layouts/LayoutCurso.astro'

type User = {
	id: number
	email: string
	createdAt: string
}
const response = await fetch('https://terapia-back.blancarte.workers.dev/users')

const data = (await response.json()) as User[]
---

<LayoutCurso title="Registros">
	<table class="mt-10">
		<thead>
			<tr>
				<th class="w-40">id</th>
				<th>Email</th>
				<th class="w-40">Fecha</th>
			</tr>
		</thead>
		<tbody>
			{
				data.map((user, index) => (
					<tr class="text-center">
						<td>{index + 1}</td>
						<td class="px-8">{user?.email}</td>
						<td>{new Date(Number(user.createdAt) * 1000).toLocaleDateString()}</td>
					</tr>
				))
			}
		</tbody>
	</table>
</LayoutCurso>
